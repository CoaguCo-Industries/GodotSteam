<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css?v=2.7" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<section id="functions">
	<header class="main">
		<h1>Functions | Networking</h1>
	</header>
	<p>Here is a list of all the functions available in the GodotSteam module. The descriptions are pulled from the official Steamworks SDK documentation with modifications made to fit GodotSteam's implementation of the functions.  Naturally, any GodotSteam-specific functions will be noted as such.</p>
	<div id="toggle-data" class="box">
		<form action="#">
			<div class="row gtr-uniform">
				<div class="col-6 col-6-small">
					<input id="gdscript" type="radio" name="layout" checked="true" autocomplete="off" />
					<label for="gdscript">GDScript</label>
				</div>
				<div class="col-6 col-6-small">
					<input id="c-sharp" type="radio" name="layout" autocomplete="off" />
					<label for="c-sharp">C#</label>
				</div>
			</div>
		</form>
	</div>
	<hr />
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#AcceptP2PSessionWithUser" target="_blank">
			<span class="gdscript">
				acceptP2PSessionWithUser( <sup>int</sup> steam_id_remote )
			</span>
			<span class="c-sharp">
				acceptP2PSessionWithUser( <sup>uint64_t</sup> steam_id_remote )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>This allows the game to specify accept an incoming packet. This needs to be called before a real connection is established to a remote host, the game will get a chance to say whether or not the remote user is allowed to talk to them.</li>
		<li>When a remote user that you haven't sent a packet to recently, tries to first send you a packet, your game will receive a callback <strong><em>p2p_session_request</em></strong>. This callback contains the Steam ID of the user who wants to send you a packet. In response to this callback, you'll want to see if it's someone you want to talk to (for example, if they're in a lobby with you), and if so, accept the connection; otherwise if you don't want to talk to the user, just ignore the request. If the user continues to send you packets, another <strong><em>p2p_session_request</em></strong> will be posted periodically. If you've called <strong>sendP2PPacket</strong> on the other user, this implicitly accepts the session request.</li>
		<li><strong>Note:</strong> This call should only be made in response to a <strong><em>p2p_session_request</em></strong> callback.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#AllowP2PPacketRelay" target="_blank">
			allowP2PPacketRelay( <sup>bool</sup> allow )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Allow or disallow P2P connections to fall back to being relayed through the Steam servers if a direct connection or NAT-traversal cannot be established.</li>
		<li>This only applies to connections created after setting this value, or to existing connections that need to automatically reconnect after this value is set.</li>
		<li>P2P packet relay is allowed by default.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#CloseP2PChannelWithUser" target="_blank">
			<span class="gdscript">
				closeP2PChannelWithUser( <sup>int</sup> steam_id_remote, <sup>int</sup> channel )
			</span>
			<span class="c-sharp">
				closeP2PChannelWithUser( <sup>uint64_t</sup> steam_id_remote, <sup>int</sup> channel )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Closes a P2P channel when you're done talking to a user on the specific channel.</li>
		<li>Once all channels to a user have been closed, the open session to the user will be closed and new data from this user will trigger a new <strong><em>p2p_session_request</em></strong> callback.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#CloseP2PSessionWithUser" target="_blank">
			<span class="gdscript">
				closeP2PSessionWithUser( <sup>int</sup> steam_id_remote )
			</span>
			<span class="c-sharp">
				closeP2PSessionWithUser( <sup>uint64_t</sup> steam_id_remote )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>This should be called when you're done communicating with a user, as this will free up all of the resources allocated for the connection under-the-hood.</li>
		<li>If the remote user tries to send data to you again, a new <strong><em>p2p_session_request</em></strong> callback will be posted.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#GetP2PSessionState" target="_blank">
			<span class="gdscript">
				getP2PSessionState( <sup>int</sup> steam_id_remote )
			</span>
			<span class="c-sharp">
				getP2PSessionState( <sup>uint64_t</sup> steam_id_remote )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Fills out a dictionary with details about the connection like whether or not there is an active connection; number of bytes queued on the connection; the last error code, if any; whether or not a relay server is being used; and the IP and Port of the remote user, if known.</li>
		<li>This should only needed for debugging purposes.</li>
		<li>Returns a <strong>dictionary</strong>:
			<ul>
				<span class="gdscript">
					<li>connection_active (bool)</li>
					<li>connecting (bool)</li>
					<li>session_error (int)</li>
					<li>using_relay (bool)</li>
					<li>bytes_queued_for_send (int)</li>
					<li>packets_queued_for_send (int)</li>
					<li>remote_ip (int)</li>
					<li>remote_port (int)</li>
				</span>
				<span class="c-sharp">
					<li>connection_active (bool)</li>
					<li>connecting (bool)</li>
					<li>session_error (uint8)</li>
					<li>using_relay (bool)</li>
					<li>bytes_queued_for_send (int32)</li>
					<li>packets_queued_for_send (int32)</li>
					<li>remote_ip (uint32)</li>
					<li>remote_port (uint16)</li>
				</span>
			</ul>
		</li>  
	</ul>
	<h4>
		getAvailableP2PPacketSize( <sup>int</sup> channel )
	</h4>
	<ul>
		<li>Calls <a href="https://partner.steamgames.com/doc/api/ISteamNetworking#IsP2PPacketAvailable" target="_blank">IsP2PPacketAvailable()</a> under the hood, returns the size of the available packet or zero if there is no such packet.</li>
		<li>
			<span class="gdscript">
				Returns an <strong>int</strong>.
			</span>
			<span class="c-sharp">
				Returns an <strong>uint32_t</strong>.
			</span>
		</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#ReadP2PPacket" target="_blank">
			<span class="gdscript">
				readP2PPacket( <sup>int</sup> packet, <sup>int</sup> channel )
			</span>
			<span class="c-sharp">
				readP2PPacket( <sup>uint32_t</sup> packet, <sup>int</sup> channel )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Reads in a packet that has been sent from another user via SendP2PPacket.</li>
		<li>This call is not blocking, and will return false if no data is available.</li>
		<li>Before calling this you should have called <strong>getAvailableP2PPacketSize / isP2PPacketAvailable</strong>.</li>
		<li>Returns a <strong>dictionary</strong>:
			<ul>
				<span class="gdscript">
					<li>data (PoolByteArray)</li>
					<li>steam_idRemote (int)</li>
				</span>
				<span class="c-sharp">
					<li>data (PoolByteArray)</li>
					<li>steam_id_remote (uint64_t)</li>
				</span>
			</ul>
		</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworking#SendP2PPacket" target="_blank">
			<span class="gdscript">
				sendP2PPacket( <sup>int</sup> steam_id_remote, <sup>array</sup> data, <sup>int</sup> sendType, <sup>int</sup> channel )
			</span>
			<span class="c-sharp">
				sendP2PPacket( <sup>uint64_t</sup> steam_id_remote, <sup>array</sup> data, <sup>int</sup> send_type, <sup>int</sup> channel )
			</span>
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Sends a P2P packet to the specified user.</li>
		<li>This is a session-less API which automatically establishes NAT-traversing or Steam relay server connections.</li>
		<li><strong>Note:</strong> The first packet send may be delayed as the NAT-traversal code runs.</li>
		<li>See <a href="https://partner.steamgames.com/doc/api/ISteamNetworking#EP2PSend" target="_blank">EP2PSend</a> for descriptions of the different ways of sending packets. The integers passed in GodotSteam are:
			<ul class="inner">
				<li>0 - send ureliable</li>
				<li>1 - send unreliable, no delay</li>
				<li>2 - send reliable</li>
				<li>3 - send reliable with buffering</li>
			</ul>
		</li>
		<li>The type of data you send is arbitrary, you can use an off the shelf system like <a href="https://developers.google.com/protocol-buffers/" target="_blank">Protocol Buffers</a> or <a href="https://capnproto.org/" target="_blank">Cap'n Proto</a> to encode your packets in an efficient way, or you can create your own messaging system.</li>
		<li>Sends a P2P packet to the specified user.</li>
		<li>Triggers a <strong><em>p2p_session_request</em></strong> callback.</li>
		<li>Returns a <strong>bool</strong>.  <em>True</em> if the packet was successfully sent. Note that this does not mean successfully received, if we can't get through to the user after a timeout of 20 seconds, then an error will be posted via the <strong><em>p2p_session_connect_fail</em></strong> callback.</li>
	</ul>
</section>					<a href="#" id="to-top" class="display:none;"><i class="fas fa-arrow-alt-circle-up"></i></a>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
	<div id="sidebar-inner" class="inner">
		<!-- Menu -->
		<nav id="menu">
			<header class="major">
				<h2>Menu</h2>
			</header>
			<ul>
				<li><a href="index.html">Introduction</a></li>
				<li>
					<span class="opener">How-To's</span>
					<ul>
						<li><a href="howto-module.html">How-To Godot 2, 3, 4</a></li>
						<li><a href="howto-gdnative.html">How-To GDNative</a></li>
					</ul>
				</li>
				<li>
					<span class="opener">Functions</span>
					<ul>
						<li><a href="functions-main.html">Main</a></li>
						<li><a href="functions-apps.html">Apps</a></li>
						<li><a href="functions-apps-list.html">App Lists</a></li>
						<li><a href="functions-friends.html">Friends</a></li>
						<li><a href="functions-game-search.html">Game Search</a></li>
						<li><a href="functions-game-server.html">Game Server</a></li>
						<li><a href="functions-game-server-stats.html">Game Server Stats</a></li>
						<li><a href="functions-html-surface.html">HTML Surface</a></li>
						<li><a href="functions-http.html">HTTP</a></li>
						<li><a href="functions-input.html">Input</a></li>
						<li><a href="functions-inventory.html">Inventory</a></li>
						<li><a href="functions-matchmaking.html">Matchmaking</a></li>
						<li><a href="functions-matchmaking-servers.html">Matchmaking Servers</a></li>
						<li><a href="functions-music.html">Music</a></li>
						<li><a href="functions-music-remote.html">Music Remote</a></li>
						<li><a href="functions-networking.html">Networking</a></li>
						<li><a href="functions-networking-messages.html">Networking Messages</a></li>
						<li><a href="functions-networking-sockets.html">Networking Sockets</a></li>
						<li><a href="functions-networking-types.html">Networking Types</a></li>
						<li><a href="functions-networking-utils.html">Networking Utils</a></li>
						<li><a href="functions-parental-settings.html">Parental Settings</a></li>
						<li><a href="functions-parties.html">Parties</a></li>
						<li><a href="functions-remote-play.html">Remote Play</a></li>
						<li><a href="functions-remote-storage.html">Remote Storage</a></li>
						<li><a href="functions-screenshots.html">Screenshots</a></li>
						<li><a href="functions-ugc.html">UGC</a></li>
						<li><a href="functions-user.html">User</a></li>
						<li><a href="functions-user-stats.html">User Stats</a></li>
						<li><a href="functions-utils.html">Utils</a></li>
						<li><a href="functions-video.html">Video</a></li>
					</ul>
				</li>
				<li>
					<span class="opener">Signals</span>
					<ul>
						<li><a href="signals-main.html">Main</a></li>
						<li><a href="signals-apps.html">Apps</a></li>
						<li><a href="signals-apps-list.html">Apps List</a></li>
						<li><a href="signals-friends.html">Friends</a></li>
						<li><a href="signals-game-search.html">Game Search</a></li>
						<li><a href="signals-game-server.html">Game Server</a></li>
						<li><a href="signals-game-server-stats.html">Game Server Stats</a></li>
						<li><a href="signals-html-surface.html">HTML Surface</a></li>
						<li><a href="signals-http.html">HTTP</a></li>
						<li><a href="signals-input.html">Input</a></li>
						<li><a href="signals-inventory.html">Inventory</a></li>
						<li><a href="signals-matchmaking.html">Matchmaking</a></li>
						<li><a href="signals-matchmaking-servers.html">Matchmaking Servers</a></li>
						<li><a href="signals-music-remote.html">Music Remote</a></li>
						<li><a href="signals-networking.html">Networking</a></li>
						<li><a href="signals-networking-sockets.html">Networking Sockets</a></li>
						<li><a href="signals-networking-utils.html">Networking Utils</a></li>
						<li><a href="signals-parental-settings.html">Parental Settings</a></li>
						<li><a href="signals-parties.html">Parties</a></li>
						<li><a href="signals-remote-play.html">Remote Play</a></li>
						<li><a href="signals-remote-storage.html">Remote Storage</a></li>
						<li><a href="signals-screenshots.html">Screenshots</a></li>
						<li><a href="signals-ugc.html">UGC</a></li>
						<li><a href="signals-user.html">User</a></li>
						<li><a href="signals-user-stats.html">User Stats</a></li>
						<li><a href="signals-utils.html">Utils</a></li>
						<li><a href="signals-video.html">Video</a></li>
					</ul>
				<li>
					<span class="opener">Godot 3.x Tutorials</span>
					<ul>
						<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
						<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
						<li><a href="tutorials-leaderboards.html">Leaderboards</a></li>
						<li><a href="tutorials-avatars.html">Avatars</a></li>
						<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
						<li><a href="tutorials-authentication.html">Authentication</a></li>
						<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
						<li><a href="tutorials-achievement-icons.html">Achievement Icons</a></li>
						<li><a href="tutorials-auto-matchmaking.html">Auto-Matchmaking</a></li>
						<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
						<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
						<li><a href="tutorials-exporting-shipping.html">Exporting and Shipping</a></li>
						<li><a href="tutorials-remove-steam.html">Remove Steam</a></li>
					</ul>
				</li>
				<li><a href="games.html">Games Using GodotSteam</a></li>
				<li><a href="https://github.com/Gramps/GodotSteam/projects/1.html" target="_blank">To-Do</a></li>
				<li>
					<span class="opener">Change Log</span>
					<ul>
						<li><a href="changelog-godot4.html">Godot 4.x</a></li>
						<li><a href="changelog-godot3.html">Godot 3.x</a></li>
						<li><a href="changelog-godot2.html">Godot 2.x</a></li>
						<li><a href="changelog-gdnative.html">GDNative</a></li>
					</ul>
				</li>
				<li><a href="contributors.html">Contributors</a></li>
			</ul>
		</nav>
		<section>
			<header class="major">
				<h2>Stuck? Need Help?</h2>
			</header>
			<p>Navigating Steamworks can be confusing sometimes. If you run across any problems, there's a few ways to get it ironed out.</p>
			<ul class="actions stacked">
				<li><a class="button primary" href="mailto:godotsteam@coaguco.com" target="_blank"><i class="fas fa-envelope-open-text"></i>&nbsp;&nbsp;Send A Support E-Mail</a></li>
				<li><a class="button primary" href="https://discord.gg/SJRSq6K" target="_blank"><i class="fab fa-discord"></i>&nbsp;&nbsp;Chat With Us On Discord</a></li>
			</ul>
		</section>
		<section>
			<header class="major">
				<h2>Donate</h2>
			</header>
			<p>If C++ is not your bag but you're feeling generous, you can support the project with your pocket change using either button below!</p>
			<ul class="actions stacked">
				<li><a class="button primary" href="https://github.com/sponsors/Gramps" target="_blank"><i class="fab fa-github"></i>&nbsp;&nbsp;with Github Sponsors</a></li>
				<li><a class="button primary" href="https://patreon.com/coaguco" target="_blank"><i class="fab fa-patreon"></i>&nbsp;&nbsp;with Patreon</a></li>
				<li><a class="button primary" href="https://www.paypal.me/sithlordkyle" target="_blank"><i class="fab fa-paypal"></i>&nbsp;&nbsp;with Paypal</a></li>
			</ul>
		</section>
		<footer>
			<ul class="actions stacked">
				<li>Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a></li>
				<li>Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a></li>
				<li>GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors</li>
				<li>Site Template by <a href="https://html5up.net">HTML5UP</a></li>
			</ul>
		</footer>
		<footer id="footer" class="copyright">
			2022 &copy; GP Garcia & CoaguCo Industries
		</footer>
	</div>
</div>		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
		<script src="js/godotsteam.js"></script>
	</body>
</html>
