<!DOCTYPE HTML>
<html>
	<head>
		<title>GodotSteam - A Steamworks Module For Godot Engine | By Gramps | GitHub</title>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="chrome=1">
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="css/main.css?v=2.7" />
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css" integrity="sha384-DyZ88mC6Up2uqS4h/KRgHuoeGwBcD4Ng9SiP4dIRy0EXTlnuz47vAwmeGwVChigm" crossorigin="anonymous" />
		<link rel="icon" type="image/x-icon" href="godotsteam-icon.ico">
		<!--[if lt IE 9]>
			<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->
		<!--[if lt IE 8]>
		<link rel="stylesheet" href="{{ '/css/ie.css' | relative_url }}">
		<![endif]-->
	</head>
	<body class="is-preload">
		<!-- Wrapper -->
		<div id="wrapper">
			<!-- Main -->
			<div id="main">
				<div class="inner">
					<!-- Header -->
					<header id="header">
						<a href="index.html" class="logo"><strong>GodotSteam</strong> A Steamworks module for Godot Engine</a>
					</header>
					<section id="functions">
	<header class="main">
		<h1>Functions | Networking Messages</h1>
	</header>
	<p>The descriptions are pulled from the official Steamworks SDK documentation with modifications made to fit GodotSteam's implementation of the functions.  Naturally, any GodotSteam-specific functions will be noted as such.</p>
	<p>The <strong>identity_reference</strong> arguments refer to identities created with the Networking Type functions.</p>
	<div id="toggle-data" class="box">
		<form action="#">
			<div class="row gtr-uniform">
				<div class="col-6 col-6-small">
					<input id="gdscript" type="radio" name="layout" checked="true" autocomplete="off" />
					<label for="gdscript">GDScript</label>
				</div>
				<div class="col-6 col-6-small">
					<input id="c-sharp" type="radio" name="layout" autocomplete="off" />
					<label for="c-sharp">C#</label>
				</div>
			</div>
		</form>
	</div>
	<hr />
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#AcceptSessionWithUser" target="_blank">
			acceptSessionWithUser( <sup>string</sup> identity_reference )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Call this in response to a <strong><em>network_messages_session_request</em></strong> callback. <strong><em>network_messages_session_request</em></strong> callbacks are posted when a user tries to send you a message, and you haven't tried to talk to them first. If you don't want to talk to them, just ignore the request. If the user continues to send you messages, <strong><em>network_messages_session_request</em></strong> callbacks will continue to be posted periodically.</li>
		<li>Returns false if there is no session with the user pending or otherwise. If there is an existing active session, this function will return true, even if it is not pending.</li>
		<li>Calling <strong>sendMessageToUser</strong> will implicitly accepts any pending session request to that user.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#CloseChannelWithUser" target="_blank">
			closeChannelWithUser( <sup>string</sup> identity_reference, <sup>int</sup> channel )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Call this  when you're done talking to a user on a specific channel. Once all open channels to a user have been closed, the open session to the user will be closed, and any new data from this user will trigger a <strong><em>network_messages_session_request</em></strong> callback.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#CloseSessionWithUser" target="_blank">
			closeSessionWithUser( <sup>string</sup> identity_reference )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Call this when you're done talking to a user to immediately free up resources under-the-hood. If the remote user tries to send data to you again, another <strong><em>network_messages_session_request</em></strong> callback will be posted.</li>
		<li>Note that sessions that go unused for a few minutes are automatically timed out.</li>
		<li>Returns a <strong>bool</strong>.</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#GetSessionConnectionInfo" target="_blank">
			getSessionConnectionInfo( <sup>string</sup> identity_reference, <sup>bool</sup> get_connection, <sup>bool</sup> get_status )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Returns information about the latest state of a connection, if any, with the given peer. Primarily intended for debugging purposes, but can also be used to get more detailed failure information.</li>
		<li>Returns the value of connection state or 0 if no connection exists with specified peer. You may pass <em>false</em> for either <strong>get_connection</strong> or <strong>get_status</strong> if you do not need the corresponding details. Note that sessions time out after a while, so if a connection fails, or <strong>sendMessageToUser</strong> returns 3, you cannot wait indefinitely to obtain the reason for failure.
		<
		<li>Returns a <strong>dictionary</strong>:
			<ul class="inner">
				<li>state (int) with values being:
					<ul class="inner">
						<li>0 - none</li>
						<li>1 - connecting</li>
						<li>2 - finding route</li>
						<li>3 - connected</li>
						<li>4 - closed by peer</li>
						<li>5 - problem detected locally</li>
						<li>-1 - wait</li>
						<li>-2 - linger</li>
						<li>-3 - dead</li>
					</ul>
				</li>
				<span>If <strong>get_connection</strong> is true:</span>
				<span class="gdscript">
					<li>identity (string)</li>
					<li>user_data (int)</li>
					<li>listen_socket (int)</li>
					<li>remote_address (string)</li>
					<li>remote_pop (int)</li>
					<li>pop_relay (int)</li>
					<li>connection_state (int); same as above states</li>
					<li>end_reason (int)</li>
					<li>end_debug (string)</li>
					<li>debug_description (string)</li>
				</span>
				<span class="c-sharp">
					<li>identity (string)</li>
					<li>user_data (uint64_t)</li>
					<li>listen_socket (uint32)</li>
					<li>remote_address (string)</li>
					<li>remote_pop (uint32)</li>
					<li>pop_relay (uint32)</li>
					<li>connection_state (int); same as above states</li>
					<li>end_reason (int)</li>
					<li>end_debug (string)</li>
					<li>debug_description (string)</li>
				</span>
				<span>If <strong>get_status</strong> is true:</span>
				</li>
				<span class="gdscript">
					<li>ping (int)</li>
					<li>local_quality (float)</li>
					<li>remote_quality (float)</li>
					<li>packets_out_per_second (float)</li>
					<li>bytes_out_per_second (float)</li>
					<li>packets_in_per_second (float)</li>
					<li>bytes_in_per_second (float)</li>
					<li>send_rate (int)</li>
					<li>pending_unreliable (int)</li>
					<li>pending_reliable (int)</li>
					<li>send_unacknowledged_reliable (int)</li>
					<li>queue_time (int)</li>
				</span>
				<span class="c-sharp">
					<li>ping (int)</li>
					<li>local_quality (float)</li>
					<li>remote_quality (float)</li>
					<li>packets_out_per_second (float)</li>
					<li>bytes_out_per_second (float)</li>
					<li>packets_in_per_second (float)</li>
					<li>bytes_in_per_second (float)</li>
					<li>send_rate (int)</li>
					<li>pending_unreliable (int)</li>
					<li>pending_reliable (int)</li>
					<li>send_unacknowledged_reliable (int)</li>
					<li>queue_time (uint64_t)</li>
				</span>
			</ul>
		</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#ReceiveMessagesOnChannel" target="_blank">
			receiveMessagesOnChannel( <sup>int</sup> channel, <sup>int</sup> max_messages )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Reads the next message that has been sent from another user via <strong>sendMessageToUser</strong> on the given channel. Returns number of messages returned into your list. (0 if no message are available on that channel.)</li>
		<li>Returns an <strong>array</strong> of:
			<ul>
				<li> messages (dictionary)
					<ul>
						<span class="gdscript">
							<li>payload (string)</li>
							<li>size (int)</li>
							<li>connection (int)</li>
							<li>identity (string)</li>
							<li>user_data (int)</li>
							<li>time_received (int)</li>
							<li>message_number (int)</li>
							<li>channel (int)</li>
							<li>flags (int)</li>
							<li>user_data (int)</li>
						</span>
						<span class="c-sharp">
							<li>payload (string)</li>
							<li>size (int)</li>
							<li>connection (uint32)</li>
							<li>identity (string)</li>
							<li>user_data (uint64_t)</li>
							<li>time_received (uint64_t)</li>
							<li>message_number (uint64_t)</li>
							<li>channel (int)</li>
							<li>flags (int)</li>
							<li>user_data (uint64_t)</li>
						</span>
					</ul>
				</li>
			</ul>
		</li>
	</ul>
	<h4>
		<a href="https://partner.steamgames.com/doc/api/ISteamNetworkingMessages#SendMessageToUser" target="_blank">
			sendMessageToUser( <sup>string</sup> identity_reference, <sup>PoolByteArray</sup> data, <sup>int</sup> flags, <sup>int</sup> channel )
			<i class="fas fa-external-link-alt"></i>
		</a>
	</h4>
	<ul>
		<li>Sends a message to the specified host via <strong>identity_reference</strong>. If we don't already have a session with that user, a session is implicitly created. There might be some handshaking that needs to happen before we can actually begin sending message data. If this handshaking fails and we can't get through, an error will be posted via the callback <strong><em>network_messages_session_failed</em></strong>. There is no notification when the operation succeeds. (You should have the peer send a reply for this purpose.)</li>
		<li>Sending a message to a host will also implicitly accept any incoming connection from that host.</li>
		<li><strong>flags</strong> is a bitmask of k_nSteamNetworkingSend_xxx options.</li>
		<li><strong>channel</strong> is a routing number you can use to help route message to different systems. You'll have to call <strong>receiveMessagesOnChannel</strong> with the same channel number in order to retrieve the data on the other end.</li>
		<li>Using different channels to talk to the same user will still use the same underlying connection, saving on resources. If you don't need this feature, use 0. Otherwise, small integers are the most efficient.</li>
		<li>It is guaranteed that reliable messages to the same host on the same channel will be be received by the remote host (if they are received at all) exactly once, and in the same order that they were sent.</li>
		<li>No other order guarantees exist! In particular, unreliable messages may be dropped, received out of order with respect to each other and with respect to reliable data, or may be received multiple times. Messages on different channels are *not* guaranteed to be received in the order they were sent.</li>
		<li>A note for those familiar with TCP/IP ports, or converting an existing codebase that opened multiple sockets: You might notice that there is only one channel, and with TCP/IP each endpoint has a port number. You can think of the channel number as the destination port. If you need each message to also include a source port (so the recipient can route the reply), then just put that in your message. That is essentially how UDP works!</li>
		<li>Returns an <strong>int</strong>.</li>
	</ul>
</section>					<a href="#" id="to-top" class="display:none;"><i class="fas fa-arrow-alt-circle-up"></i></a>
				</div>
			</div>
			<!-- Sidebar -->
			<div id="sidebar">
	<div id="sidebar-inner" class="inner">
		<!-- Menu -->
		<nav id="menu">
			<header class="major">
				<h2>Menu</h2>
			</header>
			<ul>
				<li><a href="index.html">Introduction</a></li>
				<li>
					<span class="opener">How-To's</span>
					<ul>
						<li><a href="howto-module.html">How-To Godot 2, 3, 4</a></li>
						<li><a href="howto-gdnative.html">How-To GDNative</a></li>
					</ul>
				</li>
				<li>
					<span class="opener">Functions</span>
					<ul>
						<li><a href="functions-main.html">Main</a></li>
						<li><a href="functions-apps.html">Apps</a></li>
						<li><a href="functions-apps-list.html">App Lists</a></li>
						<li><a href="functions-friends.html">Friends</a></li>
						<li><a href="functions-game-search.html">Game Search</a></li>
						<li><a href="functions-game-server.html">Game Server</a></li>
						<li><a href="functions-game-server-stats.html">Game Server Stats</a></li>
						<li><a href="functions-html-surface.html">HTML Surface</a></li>
						<li><a href="functions-http.html">HTTP</a></li>
						<li><a href="functions-input.html">Input</a></li>
						<li><a href="functions-inventory.html">Inventory</a></li>
						<li><a href="functions-matchmaking.html">Matchmaking</a></li>
						<li><a href="functions-matchmaking-servers.html">Matchmaking Servers</a></li>
						<li><a href="functions-music.html">Music</a></li>
						<li><a href="functions-music-remote.html">Music Remote</a></li>
						<li><a href="functions-networking.html">Networking</a></li>
						<li><a href="functions-networking-messages.html">Networking Messages</a></li>
						<li><a href="functions-networking-sockets.html">Networking Sockets</a></li>
						<li><a href="functions-networking-types.html">Networking Types</a></li>
						<li><a href="functions-networking-utils.html">Networking Utils</a></li>
						<li><a href="functions-parental-settings.html">Parental Settings</a></li>
						<li><a href="functions-parties.html">Parties</a></li>
						<li><a href="functions-remote-play.html">Remote Play</a></li>
						<li><a href="functions-remote-storage.html">Remote Storage</a></li>
						<li><a href="functions-screenshots.html">Screenshots</a></li>
						<li><a href="functions-ugc.html">UGC</a></li>
						<li><a href="functions-user.html">User</a></li>
						<li><a href="functions-user-stats.html">User Stats</a></li>
						<li><a href="functions-utils.html">Utils</a></li>
						<li><a href="functions-video.html">Video</a></li>
					</ul>
				</li>
				<li>
					<span class="opener">Signals</span>
					<ul>
						<li><a href="signals-main.html">Main</a></li>
						<li><a href="signals-apps.html">Apps</a></li>
						<li><a href="signals-apps-list.html">Apps List</a></li>
						<li><a href="signals-friends.html">Friends</a></li>
						<li><a href="signals-game-search.html">Game Search</a></li>
						<li><a href="signals-game-server.html">Game Server</a></li>
						<li><a href="signals-game-server-stats.html">Game Server Stats</a></li>
						<li><a href="signals-html-surface.html">HTML Surface</a></li>
						<li><a href="signals-http.html">HTTP</a></li>
						<li><a href="signals-input.html">Input</a></li>
						<li><a href="signals-inventory.html">Inventory</a></li>
						<li><a href="signals-matchmaking.html">Matchmaking</a></li>
						<li><a href="signals-matchmaking-servers.html">Matchmaking Servers</a></li>
						<li><a href="signals-music-remote.html">Music Remote</a></li>
						<li><a href="signals-networking.html">Networking</a></li>
						<li><a href="signals-networking-sockets.html">Networking Sockets</a></li>
						<li><a href="signals-networking-utils.html">Networking Utils</a></li>
						<li><a href="signals-parental-settings.html">Parental Settings</a></li>
						<li><a href="signals-parties.html">Parties</a></li>
						<li><a href="signals-remote-play.html">Remote Play</a></li>
						<li><a href="signals-remote-storage.html">Remote Storage</a></li>
						<li><a href="signals-screenshots.html">Screenshots</a></li>
						<li><a href="signals-ugc.html">UGC</a></li>
						<li><a href="signals-user.html">User</a></li>
						<li><a href="signals-user-stats.html">User Stats</a></li>
						<li><a href="signals-utils.html">Utils</a></li>
						<li><a href="signals-video.html">Video</a></li>
					</ul>
				<li>
					<span class="opener">Godot 3.x Tutorials</span>
					<ul>
						<li><a href="tutorials-initializing.html">Initializing Steam</a></li>
						<li><a href="tutorials-stats-achievements.html">Stats and Achievements</a></li>
						<li><a href="tutorials-leaderboards.html">Leaderboards</a></li>
						<li><a href="tutorials-avatars.html">Avatars</a></li>
						<li><a href="tutorials-lobbies-p2p.html">Lobbies / P2P Networking</a></li>
						<li><a href="tutorials-authentication.html">Authentication</a></li>
						<li><a href="tutorials-mac-export.html">Mac Exporting</a></li>
						<li><a href="tutorials-achievement-icons.html">Achievement Icons</a></li>
						<li><a href="tutorials-auto-matchmaking.html">Auto-Matchmaking</a></li>
						<li><a href="tutorials-rich-presence.html">Rich Presence</a></li>
						<li><a href="tutorials-linux-caveats.html">Linux Caveats</a></li>
						<li><a href="tutorials-exporting-shipping.html">Exporting and Shipping</a></li>
						<li><a href="tutorials-remove-steam.html">Remove Steam</a></li>
					</ul>
				</li>
				<li><a href="games.html">Games Using GodotSteam</a></li>
				<li><a href="https://github.com/Gramps/GodotSteam/projects/1.html" target="_blank">To-Do</a></li>
				<li>
					<span class="opener">Change Log</span>
					<ul>
						<li><a href="changelog-godot4.html">Godot 4.x</a></li>
						<li><a href="changelog-godot3.html">Godot 3.x</a></li>
						<li><a href="changelog-godot2.html">Godot 2.x</a></li>
						<li><a href="changelog-gdnative.html">GDNative</a></li>
					</ul>
				</li>
				<li><a href="contributors.html">Contributors</a></li>
			</ul>
		</nav>
		<section>
			<header class="major">
				<h2>Stuck? Need Help?</h2>
			</header>
			<p>Navigating Steamworks can be confusing sometimes. If you run across any problems, there's a few ways to get it ironed out.</p>
			<ul class="actions stacked">
				<li><a class="button primary" href="mailto:godotsteam@coaguco.com" target="_blank"><i class="fas fa-envelope-open-text"></i>&nbsp;&nbsp;Send A Support E-Mail</a></li>
				<li><a class="button primary" href="https://discord.gg/SJRSq6K" target="_blank"><i class="fab fa-discord"></i>&nbsp;&nbsp;Chat With Us On Discord</a></li>
			</ul>
		</section>
		<section>
			<header class="major">
				<h2>Donate</h2>
			</header>
			<p>If C++ is not your bag but you're feeling generous, you can support the project with your pocket change using either button below!</p>
			<ul class="actions stacked">
				<li><a class="button primary" href="https://github.com/sponsors/Gramps" target="_blank"><i class="fab fa-github"></i>&nbsp;&nbsp;with Github Sponsors</a></li>
				<li><a class="button primary" href="https://patreon.com/coaguco" target="_blank"><i class="fab fa-patreon"></i>&nbsp;&nbsp;with Patreon</a></li>
				<li><a class="button primary" href="https://www.paypal.me/sithlordkyle" target="_blank"><i class="fab fa-paypal"></i>&nbsp;&nbsp;with Paypal</a></li>
			</ul>
		</section>
		<footer>
			<ul class="actions stacked">
				<li>Godot Engine by <a href="https://godotengine.org">Juan Linietsky, Ariel Manzur and contributors</a></li>
				<li>Steamworks API by <a href="https://valvesoftware.com">Valve Corporation</a></li>
				<li>GodotSteam by <a href="https://coaguco.com">GP Garcia</a> and contributors</li>
				<li>Site Template by <a href="https://html5up.net">HTML5UP</a></li>
			</ul>
		</footer>
		<footer id="footer" class="copyright">
			2022 &copy; GP Garcia & CoaguCo Industries
		</footer>
	</div>
</div>		</div>
		<!-- Scripts -->
		<script src="js/jquery.min.js"></script>
		<script src="js/browser.min.js"></script>
		<script src="js/breakpoints.min.js"></script>
		<script src="js/util.js"></script>
		<script src="js/main.js"></script>
		<script src="js/godotsteam.js"></script>
	</body>
</html>
